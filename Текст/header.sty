%% Настройка поддержки русского языка
\usepackage{cmap}                   % Поиск по кириллице
\usepackage{mathtext}               % Кириллица в формулах
\usepackage[T1,T2A]{fontenc}        % Кодировки шрифтов
\usepackage[utf8]{inputenc}         % Кодировка текста
\usepackage[english,russian]{babel} % Подключение поддержки языков

%% Настройка размеров полей
\usepackage[top=1in, bottom=1in, left=0.8in, right=0.8in, headheight=110pt]{geometry}

\usepackage{xparse}

%% Математические пакеты
\usepackage{mathtools}              % Тот же amsmath, только с некоторыми поправками
\usepackage{amssymb}                % Математические символы
\usepackage{amsthm}                 % Оформление теорем
\usepackage{amstext}                % Текстовые вставки в формулы
\usepackage{amsfonts}               % Математические шрифты
\usepackage{icomma}                 % "Умная" запятая: $0,2$ --- число, $0, 2$ --- перечисление
\usepackage{enumitem}               % Для выравнивания itemize (\begin{itemize}[align=left])
\usepackage{array}                  % Таблицы и матрицы

% Пакеты для алгоритмов
\usepackage{algorithm}
\usepackage{algorithmicx}
\usepackage[noend]{algpseudocode}
\usepackage{listings}

%% Шрифты
\usepackage{euscript}               % Шрифт Евклид
\usepackage{mathrsfs}               % \mathscr{}

%% Графика
\usepackage[pdftex]{graphicx}       % Вставка картинок
\graphicspath{{images/}}            % Стандартный путь к картинкам
\usepackage{tikz}                   % Рисование всего
\usepackage{pgfplots}               % Графики
%\pgfplotsset{compat=1.12}
\usepackage{circuitikz}             % Электрические цепи
\usepackage{wrapfig}                % Обволакивание изображений текстом
\usetikzlibrary{patterns}
\usetikzlibrary{calc,intersections,through,backgrounds}
\usepackage{tkz-euclide}
\usetkzobj{all}
\usepackage{blindtext}

%% Прочие пакеты
\usepackage{indentfirst}                                % Красная строка в начале текста
\usepackage{epigraph}                                   % Эпиграфы
\usepackage{fancybox,fancyhdr}                          % Колонтитулы
\usepackage[colorlinks=true, urlcolor=blue]{hyperref}   % Ссылки
\usepackage{titlesec}                                   % Изменение формата заголовков
\usepackage[normalem]{ulem}                             % Для зачёркиваний
\usepackage[makeroom]{cancel}                           % И снова зачёркивание (на этот раз косое)
\usepackage{makecell}                                   % Разбиение клетки по диагонали
\usepackage{xifthen}                                    % if-else в определениях комманд

%% Прочее
\mathtoolsset{showonlyrefs=true}        % Показывать номера только у тех формул,
                                        % на которые есть \eqref{} в тексте.
\renewcommand{\headrulewidth}{1.8pt}    % Изменяем размер верхнего отступа колонтитула
\renewcommand{\footrulewidth}{0.0pt}    % Изменяем размер нижнего отступа колонтитула


%% Замена цвета гиперссылки на заметку на синий
\makeatletter
\def\@footnotecolor{red}
\define@key{Hyp}{footnotecolor}{%
    \HyColor@HyperrefColor{#1}\@footnotecolor%
}
\def\@footnotemark{%
    \leavevmode
    \ifhmode\edef\@x@sf{\the\spacefactor}\nobreak\fi
    \stepcounter{Hfootnote}%
    \global\let\Hy@saved@currentHref\@currentHref
    \hyper@makecurrent{Hfootnote}%
    \global\let\Hy@footnote@currentHref\@currentHref
    \global\let\@currentHref\Hy@saved@currentHref
    \hyper@linkstart{footnote}{\Hy@footnote@currentHref}%
    \@makefnmark
    \hyper@linkend
    \ifhmode\spacefactor\@x@sf\fi
    \relax
}%
\makeatother

%% Параметры колонтитулов
\hypersetup{footnotecolor=blue}
\fancyfoot{}
\fancyhead[RO,LE]{\thepage}
\fancyhead[LO]{\leftmark}
\fancyhead[RE]{\rightmark}

\usepackage{hyperref}

 % Цвета для гиперссылок
\usepackage{xcolor}
\usepackage{floatflt}
\usepackage{ulem}

% hack for indentation
\usepackage{indentfirst}
\usepackage{longtable}
\usepackage{graphicx}

\usepackage{chngcntr}
\counterwithin{figure}{section}
\counterwithin{table}{section}

\usepackage{caption}
% \captionsetup[table]{position=t,justification=raggedleft,slc=off}

% hack for список литературы
\usepackage{etoolbox}
\patchcmd{\thebibliography}{\section*}{\section}{}{}
\fancyhf{}
\fancyhead[R]{\head}
\fancyhead[L]{\thepage}

\def\baselinestretch{1}

\makeatletter
\let\newtitle\@title
\let\newdate\@date
\makeatother

\linespread{1.3}
